# TR pipeline at UA 

2019-12-11

Present: Tony, Chris, Edwin, David, Eric, Julian (Max, afterwards)

HackMD link: <https://hackmd.io/W9Fj7N5WQzy0AxZxTKQyoA>

Eric: (Nirav says:)

- Tar up files
- Directory structure
- icommands + remove Globus

Tony: Use `irsync` instead of `iput`

David: There is a currently a way to tar up files on NCSA before sending to tape.

Julian: Can we use this as a model for a local solution?

Eric: No Globus

Edwin: The manifest file generated by Globus might be a good place to hook in the IRODS & tar piece.

Eric: Could also do it just before the 'cleanup' step.

Eric: Getting trottled due to many small files, at registration (ireg) as well as download steps.

Chris: What about the metadata for the single files? For discovery, etc. Never mind, that's a workflow issue.

(Discussion of road map)

David: Why such a strong anti-Globus sentiment?

Eric: Replication of infrastructure, maintaining two different, parallel systems.

Julian: (Do not move everything at the same time, reliability, etc. Reliable operation depends on Globus & various scripts.)

Eric: Agreed. (:thumbsup: in front of proposed roadmap.)

![](https://i.imgur.com/Fk4JTyE.jpg)
    

---

Max joins after first meeting finished.

Max:

1. Process A : FTP monitoring (for transfer from gantry)
    - Something that looks for the new files that we need to transfer
    - Runs on cache server
    - Uses the FTP log for that
2. Process B: Did we miss any files? Requeues any transfers
    - If it finds missing files it posts it to the above process (1) which also exposes an API endpoint
3. Process B: Same process also queues it up for deletion

Max wrote 1, and J.D. wrote Process B that does steps 2 and 3

Chris: Day-basis or file-basis?

Max: Both

Max: Need to make sure J.D. is onboard for maintaining Process B

Max: Whole process could be simplified

Chris: Students in ACIC class says it's taking more than 24 hours to process a day's data

Max: Sounds about right

Chris: I figured 12-15 hours

Max: Stitching field mosaic together takes a few hours on its own

David: Maybe we don't need the orthomosaic. Statistically bit more complicated. Could calculate canopy cover per plot.

Max: Worried about what problems and errors we'd introduce

Chris: Think we could address that

(Some talk about keeping track of pixels, averaging, rectangles, etc.)

Max: Sounds fine. But are we algorithm developers or implementors? Should we be responsible, for being on the hook for algorithms which may prove to be incorrect?

